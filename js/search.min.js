onload=function(){installServiceWorker()},displayResults=function(e,t){resultsList=document.getElementById("search-results");var r=resultsList.cloneNode(!1);for(index=0;index<e.length&&index<t;++index){if("item"in e[index])var i=e[index].item;else i=e[index];var n=document.createElement("li");n.classList.add("search-result");var s=document.createElement("a");s.href=i.html;var l=document.createElement("h2"),c=document.createElement("div");c.classList.add("result-icon","baseline");var a=document.createElement("img");a.src="./img/"+i.category+".svg";var o=document.createElement("img");o.classList.add("photo"),o.src=i.image,"svg"==i.image.split(".").pop()&&n.classList.add("new-recipe-"+i.category.toLowerCase());var d=document.createTextNode(i.name);l.appendChild(d),c.appendChild(a),c.appendChild(l),s.appendChild(o),s.appendChild(c),n.appendChild(s),r.appendChild(n)}resultsList.parentNode.replaceChild(r,resultsList),resultsList=r},onPatternChange=function(){recipe_list=filterRecipesByOptions();var e=new Fuse(recipe_list,{shouldSort:!0,threshold:.22,location:0,distance:100,minMatchCharLength:1,keys:["name"]}),t=document.getElementById("search-pattern");if(0==t.value.length){var r=resultsList.cloneNode(!1);return resultsList.parentNode.replaceChild(r,resultsList),void(resultsList=r)}var i=e.search(t.value);displayResults(i,20)},filterRecipesByOptions=function(){return hasNutrition=document.getElementById("has_nutrition").checked,selectVegan=document.getElementById("vegan").checked,selectDairyFree=document.getElementById("dairyfree").checked,selectGlutenFree=document.getElementById("glutenfree").checked,recipes=recipe_data.recipes,hasNutrition&&(recipes=recipes.filter(function(e){return e.nutrition})),selectVegan&&(recipes=recipes.filter(function(e){if(null!=e.diet&&e.diet.includes("Vegan"))return e})),selectDairyFree&&(recipes=recipes.filter(function(e){if(null!=e.diet&&e.diet.includes("DairyFree"))return e})),selectGlutenFree&&(recipes=recipes.filter(function(e){if(null!=e.diet&&e.diet.includes("GlutenFree"))return e})),recipes},displayCategory=function(t){var e=filterRecipesByOptions().filter(function(e){return e.category==t});displayResults(e,200)},installServiceWorker=function(){"serviceWorker"in navigator?(console.log("CLIENT: service worker registration in progress."),navigator.serviceWorker.register("/service-worker.min.js").then(function(){console.log("CLIENT: service worker registration complete.")},function(){console.log("CLIENT: service worker registration failure.")})):console.log("CLIENT: service worker is not supported.")};