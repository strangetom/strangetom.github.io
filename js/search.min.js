class RecipeCard extends HTMLLIElement{constructor(e){self=super();const t=document.createElement("h2");t.appendChild(document.createTextNode(e.name)),t.setAttribute("class","recipe-title");const n=document.createElement("img");n.setAttribute("class","recipe-photo"),n.setAttribute("src",e.image),n.setAttribute("alt",e.name),n.setAttribute("width","512"),n.setAttribute("height","288");const s=document.createElement("div");s.classList.add("recipe-overlay"),s.classList.add(e.category),s.appendChild(n),s.appendChild(t);const i=document.createElement("a");if(i.setAttribute("href",e.html),i.appendChild(s),"svg"==e.image.split(".").pop()){const e=document.createElement("span");e.innerHTML="Coming Soon",e.classList.add("recipe-new"),i.appendChild(e)}i.appendChild(this.newLabel('<svg xmlns="http://www.w3.org/2000/svg" class="meta-icon" viewBox="0 0 100 100"><circle cx="50" cy="50" r="45" fill="none" stroke="#fff" stroke-width="10"/><path stroke="#fff" fill="none" stroke-width="10" d="M50 15v35l25 25"/></svg>\n'+e.time,e.category)),i.appendChild(this.newLabel('<svg xmlns="http://www.w3.org/2000/svg" class="meta-icon" viewBox="0 0 60 90"><g fill="#fff"><path d="M26.814 21.33c0-10.2-6.003-21.3-13.407-21.3C6.002.03 0 11.13 0 21.33c0 6.429 2.387 10.96 6.006 13.433 2.262 1.546 3.647 4.075 3.599 6.814l-.76 43.582c-.042 2.419 1.717 4.6 4.126 4.824a4.568 4.568 0 005.003-4.626l-.764-43.78c-.048-2.739 1.338-5.268 3.599-6.814 3.618-2.474 6.005-7.004 6.005-13.433zM60.983 29.703L60.219.973a1 1 0 00-1-.973h-2.222a1 1 0 00-1 1v24.127a1 1 0 01-1 1h-1.915a1 1 0 01-1-1V1a1 1 0 00-1-1h-2.297a1 1 0 00-1 1v24.127a1 1 0 01-1 1H44.87a1 1 0 01-1-1V1a1 1 0 00-1-1h-2.222a1 1 0 00-1 .973l-.764 28.73a3.999 3.999 0 002.961 3.969l2.14.575a2.998 2.998 0 012.221 2.95l-.84 48.159a4.566 4.566 0 109.132 0l-.84-48.159a3.001 3.001 0 012.221-2.95l2.14-.575a3.998 3.998 0 002.964-3.969z"/></g></svg>\nServes '+e.yield,e.category)),e.nutrition&&i.appendChild(this.newLabel("Nutrition &#10003;",e.category)),e.diet.includes("Vegan")&&i.appendChild(this.newLabel("Vegan",e.category)),e.diet.includes("GlutenFree")&&i.appendChild(this.newLabel("Gluten Free",e.category)),e.diet.includes("DairyFree")&&i.appendChild(this.newLabel("Dairy Free",e.category)),e.diet.includes("NutFree")&&i.appendChild(this.newLabel("Nut Free",e.category));for(let t of e.cuisine)i.appendChild(this.newLabel('<svg xmlns="http://www.w3.org/2000/svg" class="meta-icon" viewBox="0 0 24 31"><path d="M12.26 0C5.489 0 0 5.489 0 12.26S10.627 31 12.26 31c1.633 0 12.26-11.969 12.26-18.74C24.52 5.489 19.031 0 12.26 0zm0 16.639a4.816 4.816 0 110-9.634 4.816 4.816 0 010 9.634z" fill="#fff"/></svg>\n'+t,e.category));this.appendChild(i)}newLabel=function(e,t){const n=document.createElement("span");return n.innerHTML=e,n.classList.add("recipe-meta"),n.classList.add(t),n}}onload=function(){if(installServiceWorker(),customElements.define("recipe-card",RecipeCard,{extends:"li"}),sessionStorage.getItem("lastSearch")){let e=sessionStorage.getItem("lastSearch");if("pattern"==e)onPatternChange();else if("selection"==e){let e=sessionStorage.getItem("selection"),t=sessionStorage.getItem("value");displaySelection(e,t)}}document.getElementById("search-pattern").oninput=onPatternChange},displayResults=function(e,t){var n=document.getElementById("search-results"),s=n.cloneNode(!1);for(index=0;index<e.length&&index<t;++index){if("item"in e[index])var i=e[index].item;else i=e[index];var a=new RecipeCard(i);a.classList.add("search-result"),s.appendChild(a)}n.parentNode.replaceChild(s,n),n=s},onPatternChange=function(e){sessionStorage.setItem("lastSearch","pattern");recipe_list=recipe_data.recipes;var t=document.getElementById("search-pattern"),n=new Fuse(recipe_list,{shouldSort:!0,threshold:.22,distance:100,minMatchCharLength:1,ignoreLocation:!0,keys:["name"]});if(0==t.value.length){var s=document.getElementById("search-results"),i=s.cloneNode(!1);return s.parentNode.replaceChild(i,s),void(s=i)}var a=n.search(t.value);displayResults(a,20)},displaySelection=function(e,t){if(sessionStorage.setItem("lastSearch","selection"),sessionStorage.setItem("selection",e),sessionStorage.setItem("value",t),""!=t){var n=recipe_data.recipes.filter((function(n){return n[e].includes(t)}));displayResults(n,200)}else{var s=document.getElementById("search-results"),i=s.cloneNode(!1);s.parentNode.replaceChild(i,s),s=i}},installServiceWorker=function(){"serviceWorker"in navigator?(console.log("CLIENT: service worker registration in progress."),navigator.serviceWorker.register("/service-worker.min.js").then((function(){console.log("CLIENT: service worker registration complete.")}),(function(){console.log("CLIENT: service worker registration failure.")}))):console.log("CLIENT: service worker is not supported.")};