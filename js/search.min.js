class RecipeCard extends HTMLLIElement{constructor(e){self=super();const t=document.createElement("h2");t.appendChild(document.createTextNode(e.name)),t.setAttribute("class","recipe-title");const i=document.createElement("img");i.setAttribute("class","recipe-photo"),i.setAttribute("src",e.image),i.setAttribute("alt",e.name),i.setAttribute("width","512"),i.setAttribute("height","288");const s=document.createElement("div");s.classList.add("recipe-overlay"),s.classList.add(e.category),s.appendChild(i),s.appendChild(t);const n=document.createElement("a");if(n.setAttribute("href",e.html),n.appendChild(s),"svg"==e.image.split(".").pop()){const e=document.createElement("span");e.innerHTML="Coming Soon",e.classList.add("recipe-new"),n.appendChild(e)}n.appendChild(this.newLabel('<svg xmlns="http://www.w3.org/2000/svg" class="meta-icon" viewBox="0 0 100 100"><circle cx="50" cy="50" r="45" fill="none" stroke="#fff" stroke-width="10"/><path stroke="#fff" fill="none" stroke-width="10" d="M50 15v35l25 25"/></svg>\n'+e.time,e.category)),n.appendChild(this.newLabel('<svg xmlns="http://www.w3.org/2000/svg" class="meta-icon" viewBox="0 0 60 90"><g fill="#fff"><path d="M26.814 21.33c0-10.2-6.003-21.3-13.407-21.3C6.002.03 0 11.13 0 21.33c0 6.429 2.387 10.96 6.006 13.433 2.262 1.546 3.647 4.075 3.599 6.814l-.76 43.582c-.042 2.419 1.717 4.6 4.126 4.824a4.568 4.568 0 005.003-4.626l-.764-43.78c-.048-2.739 1.338-5.268 3.599-6.814 3.618-2.474 6.005-7.004 6.005-13.433zM60.983 29.703L60.219.973a1 1 0 00-1-.973h-2.222a1 1 0 00-1 1v24.127a1 1 0 01-1 1h-1.915a1 1 0 01-1-1V1a1 1 0 00-1-1h-2.297a1 1 0 00-1 1v24.127a1 1 0 01-1 1H44.87a1 1 0 01-1-1V1a1 1 0 00-1-1h-2.222a1 1 0 00-1 .973l-.764 28.73a3.999 3.999 0 002.961 3.969l2.14.575a2.998 2.998 0 012.221 2.95l-.84 48.159a4.566 4.566 0 109.132 0l-.84-48.159a3.001 3.001 0 012.221-2.95l2.14-.575a3.998 3.998 0 002.964-3.969z"/></g></svg>\nServes '+e.yield,e.category)),e.nutrition&&n.appendChild(this.newLabel("Nutrition &#10003;",e.category)),"diet"in e&&(e.diet.includes("Vegan")&&n.appendChild(this.newLabel("Vegan",e.category)),e.diet.includes("GlutenFree")&&n.appendChild(this.newLabel("Gluten Free",e.category)),e.diet.includes("DairyFree")&&n.appendChild(this.newLabel("Dairy Free",e.category)),e.diet.includes("NutFree")&&n.appendChild(this.newLabel("Nut Free",e.category))),this.appendChild(n)}newLabel=function(e,t){const i=document.createElement("span");return i.innerHTML=e,i.classList.add("recipe-meta"),i.classList.add(t),i}}onload=function(){installServiceWorker(),customElements.define("recipe-card",RecipeCard,{extends:"li"}),""!=document.getElementById("search-pattern").value&&onPatternChange()},displayResults=function(e,t){resultsList=document.getElementById("search-results");var i=resultsList.cloneNode(!1);for(index=0;index<e.length&&index<t;++index){if("item"in e[index])var s=e[index].item;else s=e[index];var n=new RecipeCard(s);n.classList.add("search-result"),i.appendChild(n)}resultsList.parentNode.replaceChild(i,resultsList),resultsList=i},onPatternChange=function(){recipe_list=recipe_data.recipes;var e=new Fuse(recipe_list,{shouldSort:!0,threshold:.22,distance:100,minMatchCharLength:1,ignoreLocation:!0,keys:["name"]}),t=document.getElementById("search-pattern");if(0==t.value.length){var i=resultsList.cloneNode(!1);return resultsList.parentNode.replaceChild(i,resultsList),void(resultsList=i)}var s=e.search(t.value);displayResults(s,20)},displayCategory=function(e){var t=recipe_data.recipes.filter((function(t){return t.category==e}));displayResults(t,200)},installServiceWorker=function(){"serviceWorker"in navigator?(console.log("CLIENT: service worker registration in progress."),navigator.serviceWorker.register("/service-worker.min.js").then((function(){console.log("CLIENT: service worker registration complete.")}),(function(){console.log("CLIENT: service worker registration failure.")}))):console.log("CLIENT: service worker is not supported.")};