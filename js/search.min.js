onload=function(){patternField=document.getElementById("search-pattern"),patternField.oninput=onPatternChange,patternField.onpropertychange=patternField.oninput,installServiceWorker()},displayResults=function(e,t){resultsList=document.getElementById("search-results");var r=resultsList.cloneNode(!1),n=[];for(index=0;index<e.length&&index<t;++index){var s=e[index],a=document.createElement("li");a.classList.add(s.category),n.includes(s.name[0].toLowerCase())||(a.id=s.name[0].toLowerCase(),n.push(s.name[0].toLowerCase()));var i=document.createElement("a");i.href=s.html;var o=document.createElement("img");o.setAttribute("category",s.category),o.classList.add("photo"),o.src=s.image;var l=document.createElement("h2");l.innerHTML=s.name,i.appendChild(o),i.appendChild(l),a.appendChild(i),r.appendChild(a)}resultsList.parentNode.replaceChild(r,resultsList),resultsList=r},onPatternChange=function(){document.getElementsByClassName("shortcut-container")[0].style.display="none";var e=new Fuse(recipe_data.recipes,{shouldSort:!0,threshold:.22,location:0,distance:100,maxPatternLength:32,minMatchCharLength:1,keys:["name"]});if(0==patternField.value.length){var t=resultsList.cloneNode(!1);return resultsList.parentNode.replaceChild(t,resultsList),void(resultsList=t)}var r=e.search(patternField.value);displayResults(r,20)},displayCategory=function(t){document.getElementsByClassName("shortcut-container")[0].style.display="block";var e=recipe_data.recipes.filter(function(e){return e.category==t});displayResults(e,200)},installServiceWorker=function(){"serviceWorker"in navigator?(console.log("CLIENT: service worker registration in progress."),navigator.serviceWorker.register("/service-worker.js").then(function(){console.log("CLIENT: service worker registration complete.")},function(){console.log("CLIENT: service worker registration failure.")})):console.log("CLIENT: service worker is not supported.")};