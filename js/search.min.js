var patternField,matchFn=fuzzy_match,resultsList=null,currentDataSet=recipe_data.recipes,asyncMatcher=null;onload=function(){(patternField=document.getElementById("search-pattern")).oninput=onPatternChange,patternField.onpropertychange=patternField.oninput,resultsList=document.getElementById("search-results")},displayResults=function(e){var t=resultsList.cloneNode(!1);for(index=0;index<e.length&&index<20;++index){var n=e[index][2],a=document.createElement("li"),r=document.createElement("a");r.href=n.html;var l=document.createElement("img");l.setAttribute("category",n.category),l.onerror=function(){this.onerror=null,this.src="./img/"+this.getAttribute("category")+".svg"},l.classList.add("photo"),l.src=n.image;var s=document.createElement("table");s.setAttribute("width","100%");var i=document.createElement("td");i.setAttribute("width","90%");var c=document.createElement("h2");c.innerHTML=n.name;var d=document.createElement("td");d.setAttribute("width","10%");var u=document.createElement("img");u.classList.add("icon"),u.src="./img/"+n.category+".svg",u.setAttribute("align","middle"),d.appendChild(u),i.appendChild(c),s.appendChild(i),s.appendChild(d),r.appendChild(l),r.appendChild(s),a.appendChild(r),t.appendChild(a)}resultsList.parentNode.replaceChild(t,resultsList),resultsList=t},onPatternChange=function(){null!==asyncMatcher&&(asyncMatcher.cancel(),asyncMatcher=null);var e=patternField.value;if(null!=currentDataSet){if(null!==resultsList){var t=resultsList.cloneNode(!1);resultsList.parentNode.replaceChild(t,resultsList),resultsList=t}0!=e.length&&(asyncMatcher=new fts_fuzzy_match_async(matchFn,e,currentDataSet,function(e){matchFn==fuzzy_match&&(e=e.sort(function(e,t){return t[1]-e[1]})),displayResults(e),asyncMatcher=null})).start()}};