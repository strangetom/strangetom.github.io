fractionScaleMap={.5:{.5:"¼",1:"½",2:"1",3:"1½"},.333:{.5:"⅙",1:"⅓",2:"⅔",3:"1"},.666:{.5:"⅓",1:"⅔",2:"1⅓",3:"2"},.667:{.5:"⅓",1:"⅔",2:"1⅓",3:"2"},.25:{.5:"⅛",1:"¼",2:"½",3:"¾"},.75:{.5:"⅜",1:"¾",2:"1½",3:"2¼"},.2:{.5:"⅒",1:"⅕",2:"⅖",3:"⅗"},.4:{.5:"⅕",1:"⅖",2:"⅘",3:"1⅕"},.6:{.5:"³⁄₁₀",1:"⅗",2:"1⅕",3:"1⅘"},.8:{.5:"⅖",1:"⅘",2:"1⅗",3:"2⅕"},.1665:{.5:"¹⁄₁₂",1:"⅙",2:"⅓",3:"½"},.833:{.5:"⁵⁄₁₂",1:"⅚",2:"1⅔",3:"2½"},.14285:{.5:"¹⁄₁₄",1:"⅐",2:"²⁄₇",3:"³⁄₇"},.125:{.5:"¹⁄₁₆",1:"⅛",2:"¼",3:"⅜"},.375:{.5:"³⁄₁₆",1:"⅜",2:"¾",3:"1⅛"},.625:{.5:"⁵⁄₁₆",1:"⅝",2:"1¼",3:"1⅞"},.875:{.5:"⁷⁄₁₆",1:"⅞",2:"1¾",3:"2⅝"},1:{.5:"½",1:"1",2:"2",3:"3"}},scaleRecipe=function(e){servings_element=document.getElementById("servings"),default_servings=servings_element.dataset.default,default_servings.includes("-")?servings_element.innerHTML=scaleRange(default_servings,e):(new_servings=default_servings*e,Number.isInteger(new_servings)?servings_element.innerHTML=new_servings:servings_element.innerHTML=formatFraction(new_servings)),SQ=document.getElementsByClassName("scalable");for(var a=0;a<SQ.length;a++){default_value=SQ[a].dataset.default;var t="x"==default_value.slice(-1);t&&(default_value=default_value.slice(0,-1)),/\d/.test(default_value)&&(default_value.includes("-")?(scaled=scaleRange(default_value,e),setScaledValue(SQ[a],scaled,t)):default_value<=1?(scaled=fractionScaleMap[default_value][e],setScaledValue(SQ[a],scaled,t)):(scaled=Number((Number(default_value)*e).toPrecision(5)),Number.isInteger(Number(scaled))?setScaledValue(SQ[a],scaled.toFixed(0),t):setScaledValue(SQ[a],formatFraction(scaled),t)))}},setScaledValue=function(e,a,t){t&&(a+="x"),"quantity"in e.dataset?e.dataset.quantity=a:e.innerHTML=a},scaleRange=function(e,a){return split=e.split("-"),lower=scale(split[0],a),upper=scale(split[1],a),lower+"-"+upper},scale=function(e,a){return Number((Math.round(e*a*24)/24).toFixed(2))},formatFraction=function(e){return integer=Math.floor(e),frac=+(e%1).toFixed(3),integer>0?integer.toFixed(0)+fractionScaleMap[frac][1]:fractionScaleMap[frac][1]};