var fractionMap={0:"",.5:"½",.333:"⅓",.666:"⅔",.25:"¼",.75:"¾",.2:"⅕",.4:"⅖",.6:"⅗",.8:"⅘",.1665:"⅙",.833:"⅚",.14285:"⅐",.125:"⅛",.375:"⅜",.625:"⅝",.875:"⅞"},convertableUnits={metric:{oz:[28,"g"],lb:[454,"g"],lbs:[454,"g"],cup:[250,"ml"],cups:[250,"ml"],pint:[568,"ml"],pints:[568,"ml"],quart:[950,"nl"],quarts:[950,"nl"]},imperial:{g:[.035,"oz"],kg:[2.2,"lbs"],ml:[.00423,"cups"],l:[4.423,"cups"]}};scaleRecipe=function(t,e){highlightButtons(t);let a=document.querySelector(".scale-btns > .selected"),n=a.innerHTML.substring(1);a=document.querySelector(".unit-btns > .selected");let l=a.innerHTML.toLowerCase();setServings(n);let s=document.getElementsByClassName("scalable");for(var i=0;i<s.length;i++){let t=n,e=s[i];if(e.hasAttribute("data-unit")){if(""==e.dataset.default)continue;let a=e.dataset.defaultunit,n="x"==e.dataset.default.slice(-1);if(Object.keys(convertableUnits[l]).includes(a)){let n=convertableUnits[l][a];t*=n[0],e.dataset.unit=n[1]}else e.dataset.unit=n?convertMixedUnit(l,a):e.dataset.defaultunit;e.dataset.default.includes("-")?scaled=scaleRange(e.dataset.default,t):scaled=n?formatQuantity(e.dataset.default.slice(0,-1)*t):formatQuantity(e.dataset.default*t),setScaledValue(e,scaled,n)}else{let a=e.nextElementSibling,n=a.dataset.unit;if(Object.keys(convertableUnits[l]).includes(n)){let e=convertableUnits[l][n];t*=e[0],a.innerHTML=e[1]}else a.innerHTML=convertMixedUnit(l,n);e.dataset.default.includes("-")?scaled=scaleRange(e.dataset.default,t):scaled=formatQuantity(e.dataset.default*t),setScaledValue(e,scaled,!1)}}},setServings=function(t){let e=document.getElementById("servings"),a=e.dataset.default;a.includes("-")?e.innerHTML=scaleRange(a,t):e.innerHTML=formatQuantity(a*t)},highlightButtons=function(t){let e=t.parentElement.children;for(btn of e)btn.classList.remove("selected");t.classList.add("selected")},convertMixedUnit=function(t,e){let a=Object.keys(convertableUnits[t]).join("|"),n=new RegExp("(?<quantity>\\d+)\\s(?<unit>"+a+")(?<extra>.*)","g").exec(e);if(n){let e=convertableUnits[t][n.groups.unit];return formatQuantity(n.groups.quantity*e[0])+" "+e[1]+n.groups.extra}return e},setScaledValue=function(t,e,a){a&&(e+="x"),"quantity"in t.dataset?t.dataset.quantity=e:t.innerHTML=e},scaleRange=function(t,e){return split=t.split("-"),lower=formatQuantity(split[0]*e),upper=formatQuantity(split[1]*e),lower+"-"+upper},formatQuantity=function(t){if(Number.isInteger(Number(t)))return t;let e=Math.floor(t),a=Number(t%1);fractionValues=Object.keys(fractionMap);let n=fractionValues.reduce((function(t,e){return Math.abs(e-a)<Math.abs(t-a)?e:t})),l=fractionMap[n];return 0==e?l:e+l};