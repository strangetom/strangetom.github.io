"use strict";const VERSION="v28::",OFFLINE_FUNDAMENTALS=["/","/offline.html","/css/colours.min.css","/css/index.min.css","/css/offline.min.css","/css/recipe.min.css","/css/all.min.css","/js/flexsearch.light.js","/js/scale_timers.min.js","/js/search.min.js","/img/header-lrg.svg","/img/logo.svg","/img/page-bg-light.svg","/img/page-bg-dark.svg","/img/recent-bg.svg","/img/search.svg","/img/arrow-light.svg","/img/arrow-dark.svg","/img/timer-reset.svg","/img/timer-start.svg","/img/timer-close.svg","/img/clock.svg","/img/cart.svg","/img/cart-fill.svg","/img/notification.svg","/img/notification-disabled.svg","/fonts/lmmonoproplt10-regular-webfont-subset.woff2"];self.addEventListener("install",function(t){t.waitUntil(caches.open(VERSION+"cached").then(function(e){return e.addAll(OFFLINE_FUNDAMENTALS)}))}),self.addEventListener("fetch",function(t){t.request.method==="GET"&&(t.request.mode=="navigate"?t.respondWith(fromNetwork(t.request,4e3).catch(()=>fromCache(t.request))):t.respondWith(caches.match(t.request).then(e=>{let i=fromNetwork(t.request,4e3).catch(()=>fromCache(t.request));return e||i})))});function fromNetwork(t,e){return new Promise(function(i,n){let c=setTimeout(n,e);fetch(t).then(function(s){clearTimeout(c);let r=s.clone();caches.open(VERSION+"cached").then(function(o){o.put(t,r)}),i(s)},n)})}function fromCache(t){return caches.open(VERSION+"cached").then(function(e){return e.match(t).then(function(i){return t.headers.get("Accept").includes("text/html")?i||caches.match("offline.html"):i})})}self.addEventListener("activate",function(t){t.waitUntil(caches.keys().then(function(e){return Promise.all(e.filter(function(i){return!i.startsWith(VERSION)}).map(function(i){return caches.delete(i)}))}))}),self.addEventListener("notificationclick",function(t){const e=t.notification;e.close(),t.waitUntil(clients.matchAll({type:"window"}).then(i=>{for(let n of i)if(n.url===e.data.url)return n.focus();return clients.openWindow(e.data.url)}))});
