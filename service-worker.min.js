"use strict";const VERSION="v39::",OFFLINE_FUNDAMENTALS=["/","/offline.html","/404.html","/css/colours.min.css","/css/header.min.css","/css/index.min.css","/css/offline.min.css","/css/recipe.min.css","/css/search.min.css","/css/all.min.css","/css/atom.xsl","/js/flexsearch.light.js","/js/scale_timers.min.js","/js/search.min.js","/js/menu.min.js","/img/logo.svg","/img/placeholder.webp","/img/page-bg-light.svg","/img/page-bg-dark.svg","/img/search.svg","/img/timer-reset.svg","/img/timer-start.svg","/img/timer-close.svg","/img/notification.svg","/img/notification-disabled.svg","/fonts/quattrocento-latin.woff2","/fonts/quattrocento-latin-ext.woff2"];self.addEventListener("install",function(t){t.waitUntil(caches.open(VERSION+"cached").then(function(e){return e.addAll(OFFLINE_FUNDAMENTALS)}))}),self.addEventListener("fetch",function(t){t.request.method!=="GET"||!t.request.url.startsWith("http")||(t.request.mode=="navigate"?t.respondWith(fromNetwork(t.request,4e3).catch(()=>fromCache(t.request))):t.respondWith(caches.match(t.request).then(e=>{let s=fromNetwork(t.request,4e3).catch(()=>fromCache(t.request));return e||s})))});function fromNetwork(t,e){return new Promise(function(s,n){let c=setTimeout(n,e);fetch(t).then(function(i){clearTimeout(c);let r=i.clone();caches.open(VERSION+"cached").then(function(o){o.put(t,r)}),s(i)},n)})}function fromCache(t){return caches.open(VERSION+"cached").then(function(e){return e.match(t).then(function(s){return t.headers.get("Accept").includes("text/html")?s||caches.match("offline.html"):s})})}self.addEventListener("activate",function(t){t.waitUntil(caches.keys().then(function(e){return Promise.all(e.filter(function(s){return!s.startsWith(VERSION)}).map(function(s){return caches.delete(s)}))}))}),self.addEventListener("notificationclick",function(t){const e=t.notification;e.close(),t.waitUntil(clients.matchAll({type:"window"}).then(s=>{for(let n of s)if(n.url===e.data.url)return n.focus();return clients.openWindow(e.data.url)}))});
