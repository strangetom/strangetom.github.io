"use strict";const VERSION="v33::",OFFLINE_FUNDAMENTALS=["/","/offline.html","/404.html","/css/colours.min.css","/css/index.min.css","/css/offline.min.css","/css/recipe.min.css","/css/all.min.css","/css/atom.xsl","/js/flexsearch.light.js","/js/scale_timers.min.js","/js/search.min.js","/img/logo.svg","/img/page-bg-light.svg","/img/page-bg-dark.svg","/img/search.svg","/img/timer-reset.svg","/img/timer-start.svg","/img/timer-close.svg","/img/cart.svg","/img/cart-fill.svg","/img/notification.svg","/img/notification-disabled.svg","/fonts/lmmonoproplt10-regular-webfont-subset.woff2"];self.addEventListener("install",function(t){t.waitUntil(caches.open(VERSION+"cached").then(function(e){return e.addAll(OFFLINE_FUNDAMENTALS)}))}),self.addEventListener("fetch",function(t){t.request.method==="GET"&&(t.request.mode=="navigate"?t.respondWith(fromNetwork(t.request,4e3).catch(()=>fromCache(t.request))):t.respondWith(caches.match(t.request).then(e=>{let n=fromNetwork(t.request,4e3).catch(()=>fromCache(t.request));return e||n})))});function fromNetwork(t,e){return new Promise(function(n,i){let c=setTimeout(i,e);fetch(t).then(function(s){clearTimeout(c);let r=s.clone();caches.open(VERSION+"cached").then(function(o){o.put(t,r)}),n(s)},i)})}function fromCache(t){return caches.open(VERSION+"cached").then(function(e){return e.match(t).then(function(n){return t.headers.get("Accept").includes("text/html")?n||caches.match("offline.html"):n})})}self.addEventListener("activate",function(t){t.waitUntil(caches.keys().then(function(e){return Promise.all(e.filter(function(n){return!n.startsWith(VERSION)}).map(function(n){return caches.delete(n)}))}))}),self.addEventListener("notificationclick",function(t){const e=t.notification;e.close(),t.waitUntil(clients.matchAll({type:"window"}).then(n=>{for(let i of n)if(i.url===e.data.url)return i.focus();return clients.openWindow(e.data.url)}))});
